version: '3.1'

stories:
# check user login utter_anything_else_v2 vs rule utter_anything_else ändern
  - story: check login happy + start coursesearch
    steps:
    - intent: start_coursesearch_form
    - action: action_delete_slot_value
    - action: utter_tip_login
    - action: utter_affirm_start_coursesearch_form
    - intent: affirm
    - slot_was_set:
      - user_login: true
      - user_id: "22218451-41f0-23dd-c50f-cdd8096610c1"
    - action: action_fetch_profile
    - slot_was_set:
      - enrollments: "Einführung in die KI"
      - course_visits: "Big Data Analytics"
      - search_terms: "KI"
    - checkpoint: start_coursesearch_form

  - story: check login happy + no coursesearch
    steps:
    - intent: start_coursesearch_form
    - action: action_delete_slot_value
    - action: utter_tip_login
    - action: utter_affirm_start_coursesearch_form
    - intent: deny
    - slot_was_set:
      - user_login: true
      - user_id: "22218451-41f0-23dd-c50f-cdd8096610c1"
    - action: action_fetch_profile
    - slot_was_set:
      - enrollments: "Einführung in die KI"
      - course_visits: "Big Data Analytics"
      - search_terms: "KI"
    - action: utter_anything_else

  - story: check login unhappy + start courseseach
    steps:
    - intent: start_coursesearch_form
    - action: action_delete_slot_value
    - action: utter_tip_login
    - action: utter_affirm_start_coursesearch_form
    - intent: affirm
    - slot_was_set:
      - user_login: false
      - user_id: None
    - checkpoint: start_coursesearch_form

  - story: check login unhappy + no courseseach
    steps:
    - intent: start_coursesearch_form
    - action: action_delete_slot_value
    - action: utter_tip_login
    - action: utter_affirm_start_coursesearch_form
    - intent: deny
    - slot_was_set:
      - user_login: false
      - user_id: None
    - action: utter_anything_else

# coursesearch form
  - story: activate course form
    steps:
    - checkpoint: start_coursesearch_form
    - action: coursesearch_form      
    - active_loop: coursesearch_form 

# coursesearch form variations
  - story: languages interjection
    steps:
    - checkpoint: start_coursesearch_form
    - action: coursesearch_form
    - active_loop: coursesearch_form
    - intent: interjection_languages
    - action: utter_interjection_languages
    - action: coursesearch_form

  - story: time interjection
    steps:
    - checkpoint: start_coursesearch_form
    - action: coursesearch_form
    - active_loop: coursesearch_form
    - intent: interjection_time
    - action: utter_interjection_time
    - action: coursesearch_form

  - story: costs interjection
    steps:
    - checkpoint: start_coursesearch_form
    - action: coursesearch_form
    - active_loop: coursesearch_form
    - intent: interjection_costs
    - action: utter_interjection_costs
    - action: coursesearch_form

  - story: topic interjection
    steps:
    - checkpoint: start_coursesearch_form
    - action: coursesearch_form
    - active_loop: coursesearch_form
    - intent: interjection_topic
    - action: utter_interjection_topic
    - action: coursesearch_form

  - story: faq interjection
    steps:
    - checkpoint: start_coursesearch_form
    - action: coursesearch_form
    - active_loop: coursesearch_form
    - intent: faq
    - action: utter_faq
    - action: coursesearch_form

  - story: stop coursesearch form happy
    steps:
    - checkpoint: start_coursesearch_form 
    - action: coursesearch_form    
    - active_loop: coursesearch_form
    - intent: stop_form
    - action: utter_ask_continue_coursesearch_form
    - intent: affirm
    - action: action_deactivate_loop
    - active_loop: null
    - slot_was_set:
      - requested_slot: null
    - action: utter_bot_information
    - intent: goodbye
    - action: utter_goodbye

  - story: stop coursesearch form happy 2
    steps:
    - checkpoint: start_coursesearch_form 
    - action: coursesearch_form    
    - active_loop: coursesearch_form
    - intent: stop_form
    - action: utter_ask_continue_coursesearch_form
    - intent: affirm
    - action: action_deactivate_loop
    - active_loop: null
    - slot_was_set:
      - requested_slot: null
    - action: utter_bot_information
    - intent: faq
    - action: utter_faq
    - action: utter_anything_else

  - story: stop coursesearch form unhappy
    steps:
    - checkpoint: start_coursesearch_form 
    - action: coursesearch_form    
    - active_loop: coursesearch_form
    - intent: stop_form
    - action: utter_ask_continue_coursesearch_form
    - intent: deny
    - action: coursesearch_form

# # negative feedback / theresa implementiert was 09092022
#   - story: negative feedback reaction
#     steps:
#     - intent: negative_feedback 
#     - action: utter_bot_apology
#     - action: utter_bot_apology_feedback # implement feedback form?
#     - action: utter_anything_else_v2

# change course search parameter
  - story: get more learning recommendation
    steps:
    - intent: additional_learning_recommendation
    - action: utter_course_form_slots 
    - action: action_additional_learning_recommendation
    - action: utter_anything_else_v2

  - story: change language learning recommendation
    steps:
    - intent: change_language_slot
    - action: action_delete_slot_value
    - action: coursesearch_form      
    - active_loop: coursesearch_form 

  - story: change topic learning recommendation
    steps:
    - intent: change_topic_slot
    - action: action_delete_slot_value
    - action: coursesearch_form      
    - active_loop: coursesearch_form 

  - story: change level learning recommendation
    steps:
    - intent: change_level_slot
    - action: action_delete_slot_value
    - action: coursesearch_form      
    - active_loop: coursesearch_form 

  - story: change max_duration learning recommendation
    steps:
    - intent: change_max_duration_slot
    - action: action_delete_slot_value
    - action: coursesearch_form      
    - active_loop: coursesearch_form 

  - story: change certificate learning recommendation
    steps:
    - intent: change_certificate_slot
    - action: action_delete_slot_value
    - action: coursesearch_form      
    - active_loop: coursesearch_form 